<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contenidos: DB2</title>
    <link rel="icon" href="../favicon.ico" type="image/x-icon"/>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../fontawesome/css/all.min.css">
    <link rel="stylesheet" href="../css/templatemo-style.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="../index.html">
                <img width="200" src="../img/logoIBMZ.png"/>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link" href="../contenidos.html">Atrás</a>
                </li>
            </ul>
            </div>
        </div>
    </nav>

    <div class="tm-hero d-flex justify-content-center align-items-center" data-parallax="scroll" data-image-src="../img/cabecera.png"></div>

    <div class="container-fluid tm-mt-60">
        <div class="row mb-4 text-center">
            <h2 class="col-12 tm-text-primary">DB2 SQL:</h2>
        </div>
        <div class="row tm-mb-74 tm-row-1640">
            <div class="col-lg-3 col-md-6 col-12"></div>
            <div class="col-lg-9 col-md-6 col-12">
                <div class="tm-about-img-text">
                    <b>1. Conceptos básicos:</b>
                    <ul>1. Base de datos: es un conjunto de tablas relacionadas.</ul>
                    <ul>2. Tabla: es una colección de filas y columnas.</ul>
                    <ul>3. Fila: es un registro individual.</ul>
                    <ul>4. Columna: es un atributo de los datos.</ul>
                    <ul>5. Vista: es una consulta guardada como objeto de tabla virtual.</ul>
                    <img width="400" src="../img/contenidos/db2/Conceptos.png"/>
                    <br><br>
                    <b>2. Tipos de datos:</b>
                    <ul>1. Numéricos: SMALLINT, INTEGER y DECIMAL(m,n)</ul>
                    <ul>2. Alfanuméricos: CHAR(n) y VARCHAR(n)</ul>
                    <ul>3. Predefinidos: DATE //-- yyyymmdd --\\, TIME //-- hhmmss --\\ y TIMESTAMP //-- fecha y hora juntos --\\</ul>
                    <br><br>
                    <b>3. Funciones predefinidas:</b>
                    <ul>1. DAY(): establece el día.</ul>
                    <ul>2. MONTH(): establece el mes.</ul>
                    <ul>3. YEAR(): establece el año.</ul>
                    <ul>4. HOUR(): establece la hora.</ul>
                    <br><br>
                    <b>4. Funciones de columna:</b>
                    <ul>1. SUM(): suma.</ul>
                    <ul>2. AVG(): hace la media.</ul>
                    <ul>3. MIN(): saca el mínimo valor.</ul>
                    <ul>4. MAX(): saca el máximo valor.</ul>
                    <br><br>
                    <b>5. Cláusulas importantes:</b>
                    <ul>1. DISTINCT: elimina duplicados.</ul>
                    <ul>2. BETWEEN: entre dos.</ul>
                    <ul>3. IN: en algo.</ul>
                    <ul>4. LIKE: como algo.</ul>
                    <ul>5. IS NULL: es nulo.</ul>
                    <ul>6. IS NOT NULL: no es nulo.</ul>
                    <ul>7. ORDER BY: ordena resultados.</ul>
                    <ul>8. FETCH FIRST N ROWS ONLY: limita número de resultados.</ul>
                    <br>
                    Las bases de datos se almacenan en grupos de almacenamiento o ficheros VSAM LDS.
                    <br><br>
                    SQL es un lenguaje de consultas estructurado de datos.
                    <br><br>
                    Tipos de SQL utilizados para definir objetos o estructuras de datos en la base de datos (DDL):
                    <ul>1. create => usado para crear nuevas tablas, vistas o índices.</ul>
                    <ul>2. alter => usado para añadir, eliminar o modificar columnas y otras propiedades.</ul>
                    <ul>3. drop => usado para eliminar una columna o una tabla.</ul>
                    <br>
                    Tipos de SQL utilizados para manipular datos en la base de datos (DML):
                    <ul>1. select => usado para consultar datos de una tabla o tablas.</ul>
                    <ul>2. insert => usado para insertar datos de una tabla o tablas.</ul>
                    <ul>3. update => usado para actualizar datos de una tabla o tablas.</ul>
                    <ul>4. delete => usado para borrar o eliminar datos de una tabla o tablas.</ul>
                    <br>
                    Tipos de SQL utilizados para controlar datos en la base de datos (DCL):
                    <ul>1. grant => usado para conceder permisos a un usuario o grupo.</ul>
                    <ul>2. revoke => usado para revocar o quitar permisos que previamente se hayan concedido.</ul>
                    <br>
                    Si se cae la base de datos, se hace un Log para auditar y recuperar los datos.
                    <br><br>
                    Para poder meter datos en una base de datos del Mainframe es necesario crear previamente un grupo de almacenamiento basado en ficheros VSAM LDS.
                    Después, crear la propia base de datos, dándole un nombre a elección. Luego, crear el espacio para las tablas, almacenadas en la base de datos.
                    A continuación, crear el índice de la tabla. Y por último, la vista.
                    <br><br>
                    Estructura de una Query Select:
                    <br><br>
                    <img width="600" src="../img/contenidos/db2/querySelect.png"/>
                    <br><br>
                    Fetch first five rows only => es otro campo para que muestre un nº determinado de filas en vez de todas las filas requeridas en los requisitos.
                    <br><br>
                    El ORDER BY puede ser ASC o DES.
                    <br><br>
                    Filtrar en WHERE con LIKE (NOT LIKE significa que no sea igual a su contenido):
                    <li>
                        G%: filtrar por todos los datos que empiecen por G.
                    </li>
                    <li>
                        _K%: filtrar por todos los datos que tengan una K en 2º posición.
                    </li>
                    <br>
                    La función coalesce(a,b) => es una función que sustituye el valor a por el b.
                    <br><br>
                    <p>----------------------------------------------------------------------------------------------------------------------------</p>
                    Ejercicios:
                    <br><br>
                    <img width="600" src="../img/contenidos/db2/ejer1.png"/>
                    <br><br>
                    Respuestas:
                    <ul>
                        1. Falso => El orden de las cláusulas en una sentencia SELECT no es arbitrario,
                        ya que debe seguir una estructura específica para que SQL la entienda correctamente.
                    </ul>
                    <ul>
                        2. C => La cláusula BETWEEN hace que las filas de la tabla de resultados no se ordenen en absoluto.
                    </ul>
                    <ul>
                        3. SELECT y FROM.
                    </ul>
                    <ul>
                        4. Apóstrofes o comillas simples.
                    </ul>
                    <ul>
                        5. La palabra clave LIKE.
                    </ul>
                    <ul>
                        6. Verdadero.
                    </ul>
                    <p>----------------------------------------------------------------------------------------------------------------------------</p>
                    Ejercicios:
                    <br><br>
                    <img width="600" src="../img/contenidos/db2/ejer2.png"/>
                    <br><br>
                    Respuestas:
                    <ul>
                        1. Verdadero => Si no usas condiciones de JOIN, se llevarán a cabo productos cartesianos.
                    </ul>
                    <ul>
                        2. B => La instrucción se ejecuta y el resultado es el producto cartesiano de las tablas.
                    </ul>
                    <ul>
                        3. Para calificar el nombre de las columnas de una manera más sencilla, con nombres más cortos y sin ambigüedad.
                    </ul>
                    <p>----------------------------------------------------------------------------------------------------------------------------</p>
                    Ejercicio ADMT:
                    <br><br>
                    <img width="600" src="../img/contenidos/db2/ejer3.png"/>
                    <br><br>
                    Respuestas:
                    <ul>
                        1. Hay que poner “M” en la interfaz del ISPF > Poner 14 > Poner 7 > Escribir en CMD 1:-DISPLAY DATABASE(*) y darle a intro,
                        para mostrar todas las bases de datos. Si en la sentencia verde le añades “restricted”, es para mostrarlas en estado restrictivo,
                        pero como no hay ninguna en estado restrictivo, no hace falta añadir “restricted”.
                    </ul>
                    <ul>
                        2. Ahora escribir en el CMD 2: -DISPLAY DATABASE() SPACENAM(*) y darle a intro, para mostrar.
                    </ul>
                    <p>----------------------------------------------------------------------------------------------------------------------------</p>
                    <br><br>
                    Hay dos tipos de funciones en SQL:
                    <ul>
                        1. Funciones de columna => son aquéllas que devuelven un valor único que representa el resultado de una operación sobre múltiples filas.<br>
                        Tipos: Sum(), Min(), Max(), Avg(), Count() y Count_Big().<br>
                        Regla importante: Estas funciones sólo pueden estar en la 1º clausula y en la de HAVING.
                    </ul>
                    <ul>
                        2. Funciones escalares => son aquéllas que devuelven un valor escalar por cada fila de entrada.<br>
                        Tipos: UPPER(), SUBSTR() y LENGTH().
                    </ul>
                    <br>
                    Otras cláusulas de SQL:
                    <ul>
                        1. HAVING => se encarga de calificar los grupos agrupados en GROUP BY. Va antes de esta cláusula última.
                    </ul>
                    <ul>
                        2. GROUP BY => se encarga de agrupar en grupos.
                    </ul>
                    <img width="600" src="../img/contenidos/db2/cmd_db.png"/><br>
                    El cmd 1: muestra todas las bases de datos que hay sin estado restrictivo.<br>
                    El cmd 2: muestra mi base de datos sin estado restrictivo.<br>
                    El cmd 3: muestra todos los tablespaces de mi base de datos en estado restrictivo, pero no encuentra nada. Sin estado restrictivo sí encuentra.<br>
                    El cmd 4: muestra todas las bases de datos que hay en estado restrictivo, pero no encuentra nada.<br>
                    El cmd 5: muestra todas las utilidades que se hayan creado. En este caso, no se encontró ninguna.
                    <br><br>
                    <img width="400" src="../img/contenidos/db2/unionall.png"/><br><br>
                    En db2 de IBM Z se pueden unir dos queries con UNION ALL. Esto consiste en juntar todas las filas de ambos queries sin duplicados, pero
                    con columnas del mismo formato.
                    <br><br>
                    La preparación y ejecución de un programa en db2, se lleva a cabo a partir de un “Bind plan” o Plan de enlace.
                    <br><br>
                    Para copiar contenido de una tabla a otra en db2, hay que irse al panel de bases de datos y poner <i>count</i> en la línea del select.
                    <br><br>
                    <p>----------------------------------------------------------------------------------------------------------------------------</p>
                    Ejercicios:
                    <br><br>
                    <img width="600" src="../img/contenidos/db2/ejer4.png"/>
                    <br><br>
                    Respuestas:
                    <ul>
                        1. Falso => No puede ser arbitrario ya que debe cumplir una serie de reglas.
                    </ul>
                    <ul>
                        2. A => Cuando todas las filas duplicadas tienen que ser eliminadas.
                    </ul>
                    <ul>
                        3. Que las columnas de ambos queries deben tener el mismo formato y el mismo número de columnas.
                        Y además, el GROUP BY debe ir al final.
                    </ul>
                    <p>----------------------------------------------------------------------------------------------------------------------------</p>
                    Ejercicios:
                    <br><br>
                    <img width="600" src="../img/contenidos/db2/ejer5.png"/>
                    <br><br>
                    Respuestas:
                    <ul>
                        1. Verdadero.
                    </ul>
                    <ul>
                        2. B.
                    </ul>
                    <ul>
                        3. La palabra clave es IN.
                    </ul>
                    <p>----------------------------------------------------------------------------------------------------------------------------</p>
                </div>            
            </div>
            <div class="col-lg-2 col-md-6 col-12"></div>
        </div>
    </div>

    <footer class="tm-bg-gray pt-5 pb-3 tm-text-gray tm-footer">
        <div class="container-fluid tm-container-small">
            <div class="row">
                <div class="col-lg-7 col-md-7 col-12 px-5 mb-3">Copyright &copy; 2025-2030 - Todos los derechos reservados</div>
                <div class="col-lg-5 col-md-5 col-12 px-5 text-right">Diseñado por Alejandro Fernández Pérez</div>
            </div>
        </div>
    </footer>
    <script src="../js/plugins.js"></script>
</body>
</html>